(function(){var a={protocol:"http",host:"127.0.0.1",port:12345};function d(f){var i=window.ActiveX?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();i.onreadystatechange=function(){if(i.readyState!==4){return}if(i.status===200){f.success(i.responseText)}else{f.error(i.status)}};var k=f.method||"GET";var h=f.data||{};var e=a.protocol+"://"+a.host+":"+a.port+f.url;if(k==="GET"&&Object.keys(h).length>0){var j="";for(var g in f.data){j+=g+"="+h[g]+"&"}e=e+"?"+j.substring(0,j.length-1)}i.open(k,e,true);i.responseType="text";if(k==="POST"){i.setRequestHeader("Content-Type","text/plain");i.send(JSON.stringify(h))}else{i.send()}}function c(e){d({url:"/status",method:"GET",success:function(f){var g=typeof e;if(g==="function"){e(f)}else{e.success=e.success||function(h){console.log("success -> "+h)};e.error=e.error||function(h){console.log("failed -> "+h)};d(e)}},error:function(f){console.log("failed -> "+f)}})}var b=b||{setConfigOptions:function(e){a.protocol=e.port||"http";a.port=e.port||12345},checkStatus:function(){console.log("Check Cloud Print!");c(function(e){alert(JSON.stringify(e))})},print:function(e){c({url:"/print",method:"POST",data:e})}};window.CloudPrint=b}());